const { Storage } = require('@google-cloud/storage');

const storage = new Storage();
const maliciousBucket = storage.bucket('malicious-pdf-files');
const benignBucket = storage.bucket('benign-pdf-files');

exports.fileCounts = async (req, res) => {
    try {
        const [maliciousFiles] = await maliciousBucket.getFiles();
        const [benignFiles] = await benignBucket.getFiles();

        console.log(`Malicious Files: ${maliciousFiles.length}`);
        console.log(`Benign Files: ${benignFiles.length}`);

        res.status(200).send(`Malicious Files: ${maliciousFiles.length}, Benign Files: ${benignFiles.length}`);
    } catch (error) {
        console.error(error);
        res.status(500).send('Error retrieving file counts.');
    }
};
